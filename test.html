<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>File Drag and Drop</title>

    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    />

    <!-- js-md5 Library -->
    <script src="https://cdn.jsdelivr.net/npm/js-md5@0.7.3/src/md5.min.js"></script>

    <style>
      .drag-area {
        height: 300px;
        border: 2px dashed #aaa;
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
      }
      .drag-area.highlight {
        border-color: purple;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1 class="mt-3">File MD5 Calculator</h1>
      <div id="drag-area" class="drag-area mt-5">
        <p>Drag & Drop your file here</p>
      </div>
      <p class="mt-3" id="md5">MD5:</p>
    </div>

    <script>
      var dragArea = document.getElementById("drag-area");

      ["dragenter", "dragover", "dragleave", "drop"].forEach((eventName) => {
        dragArea.addEventListener(eventName, preventDefaults, false);
      });

      function preventDefaults(e) {
        e.preventDefault();
        e.stopPropagation();
      }

      ["dragenter", "dragover"].forEach((eventName) => {
        dragArea.addEventListener(eventName, highlight, false);
      });

      ["dragleave", "drop"].forEach((eventName) => {
        dragArea.addEventListener(eventName, unhighlight, false);
      });

      function highlight(e) {
        dragArea.classList.add("highlight");
      }

      function unhighlight(e) {
        dragArea.classList.remove("highlight");
      }

      dragArea.addEventListener("drop", handleDrop, false);

      function handleDrop(e) {
        var dt = e.dataTransfer;
        var file = dt.files[0];
        calculateMD5(file);
      }

      function calculateMD5(file) {
        var reader = new FileReader();
        reader.onload = function (event) {
          var arrayBuffer = event.target.result;
          var hash = md5(arrayBuffer);
          document.getElementById("md5").innerText = "MD5: " + hash;
        };
        reader.readAsArrayBuffer(file);
      }
    </script>
  </body>
</html>
